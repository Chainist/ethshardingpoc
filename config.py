import random as rand
from web3 import Web3
from collections import defaultdict

NUM_SHARDS = 3
NUM_VALIDATORS = 18

SHARD_IDS = list(range(NUM_SHARDS))
VALIDATOR_NAMES = []
for i in range(NUM_VALIDATORS):
    VALIDATOR_NAMES.append(i)
VALIDATOR_WEIGHTS = {}
for v in VALIDATOR_NAMES:
    VALIDATOR_WEIGHTS[v] = rand.uniform(5, 25)


VALIDATOR_SHARD_ASSIGNMENT = {}
SHARD_VALIDATOR_ASSIGNMENT = defaultdict(list)
for v in VALIDATOR_NAMES:
    # TODO: Remove the +1. Put in to keep assignment the same.
    shard = v // (NUM_VALIDATORS//len(SHARD_IDS) + 1)
    VALIDATOR_SHARD_ASSIGNMENT[v] = shard
    SHARD_VALIDATOR_ASSIGNMENT[shard].append(v)
TTL_CONSTANT = 3

NUM_TRANSACTIONS = 50

# Experiment parameters
NUM_ROUNDS = 1000
NUM_WITHIN_SHARD_RECEIPTS_PER_ROUND = 15
NUM_BETWEEN_SHARD_RECEIPTS_PER_ROUND = 15
MEMPOOL_DRAIN_RATE = 1
REPORT_INTERVAL = 1
PAUSE_LENGTH = 0.000001

# Instant broadcast
FREE_INSTANT_BROADCAST = False

# Validity check options
VALIDITY_CHECKS_WARNING_OFF = True
VALIDITY_CHECKS_OFF = True

DEADBEEF = Web3.toChecksumAddress(hex(1271270613000041655817448348132275889066893754095))

# Reporting Parameters
REPORTING = True
DISPLAY_WIDTH = 250
DISPLAY_HEIGHT = 250
DISPLAY_MARGIN = 5
SHARD_X_SPACING = 5
SHARD_Y_SPACING = 5
SHARD_MESSAGE_YOFFSET = 10
SHARD_MESSAGE_XOFFSET = 5

CONSENSUS_MESSAGE_HEIGHTS_TO_DISPLAY_IN_ROOT = 25